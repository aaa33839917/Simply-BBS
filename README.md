# 简单论坛

一个基于Flask开发的简单论坛系统，支持发帖、评论、点赞、用户管理、板块管理等功能。

## 功能特点

### 核心功能
- ✅ 帖子发布、浏览、编辑、删除
- ✅ 评论功能，支持多级评论
- ✅ 点赞/取消点赞功能
- ✅ 帖子浏览量统计
- ✅ 板块系统，支持多板块管理
- ✅ 帖子搜索功能

### 用户系统
- ✅ 用户注册、登录、退出
- ✅ 支持同名用户，通过ID区分
- ✅ 直接ID登录功能
- ✅ 用户个人资料管理
- ✅ 角色系统：访客、用户、管理员、审核员、版主、站长
- ✅ 用户封禁/解封功能

### 权限管理
- ✅ 站长：最高权限，可管理板块、删除/封禁用户
- ✅ 管理员：可管理用户角色、审核帖子
- ✅ 审核员：可审核帖子
- ✅ 版主：可管理特定板块的帖子
- ✅ 普通用户：可发帖、评论、点赞
- ✅ 访客：可浏览帖子

### 帖子管理
- ✅ 帖子审核机制
- ✅ 帖子状态管理：待审核、已通过、已拒绝
- ✅ 帖子隐藏/显示功能
- ✅ 快速浏览：最新发布、点赞最多、浏览最多
- ✅ 板块排名

### 界面设计
- ✅ 响应式设计
- ✅ 清晰的页面结构
- ✅ 页面头和页面尾全屏显示
- ✅ 现代化的UI设计

## 技术栈

- **后端框架**: Flask 2.0+
- **前端技术**: HTML5, CSS3, JavaScript
- **模板引擎**: Jinja2
- **数据存储**: JSON文件
- **会话管理**: Flask Session
- **密码加密**: SHA-256

## 快速开始

### 环境要求
- Python 3.8+
- pip

### 安装依赖

```bash
pip install flask
```

### 运行项目

```bash
python app.py
```

访问 `http://localhost:5000` 即可进入论坛首页。

### 初始用户

系统会自动创建一个默认站长用户：
- 用户名: admin
- 密码: admin123
- 角色: 站长

请登录后及时修改密码！

## 项目结构

```
简单论坛/
├── app.py                 # 主应用文件，包含所有路由和业务逻辑
├── data/                  # 数据存储目录
│   ├── boards.json        # 板块数据
│   ├── posts.json         # 帖子数据
│   └── users.json         # 用户数据
├── static/                # 静态资源目录
│   ├── css/               # CSS样式文件
│   └── js/                # JavaScript文件
├── templates/             # 模板文件目录
│   ├── base.html          # 基础模板
│   ├── index.html         # 首页模板
│   ├── login.html         # 登录页面
│   ├── register.html      # 注册页面
│   ├── post.html          # 帖子详情页
│   ├── admin.html         # 管理后台
│   ├── review.html        # 帖子审核页面
│   ├── user.html          # 用户信息页面
│   └── edit_profile.html  # 编辑个人资料页面
├── init_admin.py          # 初始化管理员脚本
├── add_default_roles.py   # 添加默认角色脚本
├── add_default_status.py  # 添加默认帖子状态脚本
└── README.md             # 项目说明文档
```

## 用户角色

| 角色       | 权限描述                                                                 |
|------------|--------------------------------------------------------------------------|
| 访客       | 可浏览已通过审核的帖子                                                   |
| 用户       | 可发帖、评论、点赞、编辑个人资料                                         |
| 审核员     | 可审核帖子、管理自己的帖子                                               |
| 版主       | 可管理特定板块的帖子、审核帖子                                           |
| 管理员     | 可管理所有用户角色、审核帖子                                             |
| 站长       | 最高权限，可管理板块、删除/封禁用户、管理所有用户角色、审核帖子           |

## 主要功能

### 1. 帖子管理
- 发布帖子：选择板块、填写标题和内容
- 帖子审核：新帖子需要审核通过后才能显示
- 帖子排序：支持按最新发布、点赞最多、浏览最多排序
- 板块筛选：可按板块查看帖子

### 2. 用户管理
- 注册：支持同名用户注册
- 登录：支持用户名登录和直接ID登录
- 个人资料：可编辑邮箱、QQ、年龄、性别、个人介绍
- 角色管理：站长和管理员可修改用户角色
- 封禁管理：站长可封禁/解封用户

### 3. 板块管理
- 板块列表：显示所有板块及其统计信息
- 板块编辑：站长可修改板块名称、显示名称和描述
- 板块删除：站长可删除板块，帖子会移到默认板块

### 4. 审核管理
- 待审核帖子列表
- 帖子通过/拒绝功能
- 按状态筛选帖子

## 数据管理

### 数据文件

- **users.json**: 存储用户信息，包括用户名、密码、角色、封禁状态等
- **posts.json**: 存储帖子信息，包括标题、内容、作者、点赞数、浏览量等
- **boards.json**: 存储板块信息，包括名称、显示名称、描述、帖子数等

### 初始化脚本

- **init_admin.py**: 初始化站长用户，确保系统有且只有一个站长
- **add_default_roles.py**: 为现有用户添加默认角色和基本信息字段
- **add_default_status.py**: 为现有帖子添加默认状态
- **fix_data.py**: 修复数据结构问题
- **fix_board.py**: 修复板块数据
- **fix_liked_by.py**: 修复点赞数据

## 注意事项

1. **安全性**: 本项目使用JSON文件存储数据，不适合生产环境，建议使用数据库存储
2. **密码加密**: 使用SHA-256加密密码，建议在生产环境使用更安全的加密方式
3. **session配置**: 默认session过期时间为7天，可在app.py中修改
4. **备份数据**: 定期备份data目录下的JSON文件
5. **环境变量**: 生产环境中请修改app.py中的secret_key

## 开发说明

### 运行开发服务器

```bash
python app.py
```

### 项目扩展

- 可添加数据库支持，替换JSON文件存储
- 可添加邮件验证功能
- 可添加富文本编辑器
- 可添加文件上传功能
- 可添加私信功能

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request！

---

**简单论坛** - 一个轻量级的论坛系统，适合学习和小型社区使用。
